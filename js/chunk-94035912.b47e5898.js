(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-94035912"],{"74e7":function(e,t,a){"use strict";a.r(t);var l=a("7a23");const o=e=>(Object(l["pushScopeId"])("data-v-76f13050"),e=e(),Object(l["popScopeId"])(),e),c={class:"Fc m-txt",style:{width:"90%"}},i=o(()=>Object(l["createElementVNode"])("div",{style:{height:"1rem"}},null,-1)),s=o(()=>Object(l["createElementVNode"])("div",{style:{height:"0.5rem"}},null,-1)),n=o(()=>Object(l["createElementVNode"])("div",{style:{height:"0.5rem"}},null,-1)),r=o(()=>Object(l["createElementVNode"])("div",{style:{height:"0.5rem"}},null,-1)),m={class:"Fc",style:{width:"100%",margin:"0.5rem 0"}};function d(e,t,a,o,d,u){const p=Object(l["resolveComponent"])("van-nav-bar"),b=Object(l["resolveComponent"])("van-field"),g=Object(l["resolveComponent"])("van-button"),h=Object(l["resolveComponent"])("van-form");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createVNode"])(p,{title:e.$t("p_changeemail.changeemail"),"left-arrow":"",onClickLeft:o.onClickLeft},null,8,["title","onClickLeft"]),Object(l["createVNode"])(h,{onSubmit:o.onSubmit,class:"Fc w100"},{default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",c,[i,Object(l["createVNode"])(b,{modelValue:o.oldEmail,"onUpdate:modelValue":t[0]||(t[0]=e=>o.oldEmail=e),name:"oldEmail",label:"",readonly:"true",placeholder:e.$t("p_changeemail.oldemail"),class:"field",rules:[{validator:o.emailPattern,message:e.$t("p_register.emailtip2")}]},null,8,["modelValue","placeholder","rules"]),s,Object(l["createVNode"])(b,{modelValue:o.invalidCode,"onUpdate:modelValue":t[2]||(t[2]=e=>o.invalidCode=e),name:"code",label:"",placeholder:e.$t("p_forgetpass.codetip"),class:"field",rules:[{required:!0,message:e.$t("p_forgetpass.codetip")}]},{"right-icon":Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",{class:"c-blue",onClick:t[1]||(t[1]=(...e)=>u.sendinvitecode&&u.sendinvitecode(...e)),type:"primary"},Object(l["toDisplayString"])(e.$t("p_forgetpass.sendcode")),1)]),_:1},8,["modelValue","placeholder","rules"]),n,Object(l["createVNode"])(b,{modelValue:o.email,"onUpdate:modelValue":t[3]||(t[3]=e=>o.email=e),name:"email",label:"",placeholder:e.$t("p_changeemail.newemail"),class:"field",rules:[{validator:o.emailPattern,message:e.$t("p_register.emailtip2")}]},null,8,["modelValue","placeholder","rules"]),r,Object(l["createVNode"])(b,{modelValue:o.comEmail,"onUpdate:modelValue":t[4]||(t[4]=e=>o.comEmail=e),name:"comEmail",label:"",placeholder:e.$t("p_changeemail.newemailagain"),class:"field",rules:[{validator:o.emailPattern,message:e.$t("p_register.emailtip2")}]},null,8,["modelValue","placeholder","rules"]),Object(l["createElementVNode"])("div",m,[Object(l["createVNode"])(g,{round:"",block:"",type:"primary","native-type":"submit"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.$t("p_register.submit")),1)]),_:1})])])]),_:1},8,["onSubmit"])],64)}a("22fa");var u=a("2e1b"),p=(a("21a7"),a("f23a")),b=(a("3b21"),a("4b9e")),g=(a("02ab"),a("dc94")),h=(a("27f1"),a("1c96")),f=a("6605"),j=a("c24f"),O=a("5502");const v=Object(l["createApp"])();v.use(h["a"]);var V={name:"register",setup(){const e=()=>history.back(),t=Object(l["ref"])(""),a=Object(l["ref"])(""),o=Object(l["ref"])("");let{proxy:c}=Object(l["getCurrentInstance"])();const i=Object(f["c"])(),s=e=>/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e),n=Object(O["c"])(),r=e=>{console.log("submit",e),h["a"].loading({message:"",forbidClick:!0}),e.email!=e.comEmail&&(h["a"].fail(c.$t("p_changeemail.emailerr")),i.go(-1));const t={...e};Object(j["f"])(t).then(e=>{if(0==e.status){h["a"].success(c.$t("p_changeemail.changeemailsucess"));const e=()=>n.dispatch("RefreshToken");e().then(()=>{console.log("success")}).catch(e=>{console.log(e.message)}),i.go(-1)}else h["a"].fail(e.message)}).catch(e=>{console.log(e)})};return{onClickLeft:e,comEmail:o,invalidCode:t,userInfo:Object(l["computed"])(()=>n.getters.userInfo),oldEmail:Object(l["computed"])(()=>n.getters.userInfo.user.email),email:a,onSubmit:r,emailPattern:s,proxy:c}},components:{vanNavBar:g["a"],vanForm:b["a"],vanField:p["a"],vanButton:u["b"]},data(){return{}},methods:{sendinvitecode:function(){void 0!=this.userInfo.user.email&&null!=this.userInfo.user.email&&""!=this.userInfo.user.email?(h["a"].loading({message:"",forbidClick:!0}),Object(j["s"])({email:this.userInfo.user.email}).then(e=>{0==e.status?h["a"].success(this.proxy.$t("p_forgetpass.sendemailtip")):h["a"].fail(e.message)}).catch(e=>{console.log(e)})):h["a"].fail(this.proxy.$t("p_register.emailtip2"))}}},w=(a("b987"),a("6b0d")),_=a.n(w);const y=_()(V,[["render",d],["__scopeId","data-v-76f13050"]]);t["default"]=y},b987:function(e,t,a){"use strict";a("c600")},c600:function(e,t,a){}}]);